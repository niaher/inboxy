<div ref:container class="inline-form"></div>

<script>
	import FormComponent from "core-ui/Form";

	export default {
		oncreate() {
			var app = this.get("app");
			var field = this.get("field");
			var parentFormComponent = this.get("parent");

			var formInstance = app.getFormInstance(field.data.form, true);	
			
			formInstance.initializeInputFields(field.data.inputFieldValues).then(() => {
				var f = new FormComponent({
					target: this.refs.container,
					data: {
						metadata: formInstance.metadata,
						form: formInstance,
						app: app,
						useUrl: false,
						parent: parentFormComponent
					}
				});

				f.init();

				this.set({current: f});
			});

			this.get("parent").on("destroy", () => this.destroy());
		},
		ondestroy() {
			var form = this.get("current");
			
			if (form != null){
				form.destroy();
			}
		}
	}
</script>

<style>
	.inline-form {
		border-width: 1px 1px 1px;
		border-style: solid;
		border-color: #ccc;
		margin: 30px 0;
		padding: 1px 1px;
		border-radius: 5px;
	}
</style>
